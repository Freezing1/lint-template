# å‰ç«¯ç¼–ç è§„èŒƒ

**ç»Ÿä¸€çš„ç¼–ç è§„èŒƒå¯¹å›¢é˜Ÿé¡¹ç›®çš„é•¿è¿œç»´æŠ¤èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨. ä¸€è‡´æ€§çš„ä»£ç è§„èŒƒå¯ä»¥å¢å¼ºå›¢é˜Ÿå¼€å‘åä½œæ•ˆç‡ã€æé«˜ä»£ç è´¨é‡ã€å‡å°‘é—ç•™ç³»ç»Ÿç»´æŠ¤çš„è´Ÿæ‹…**

---

## HTML & Javascript

- Lint å·¥å…·
  - [ESLint](https://cn.eslint.org/) - ğŸ”¥ ç›®å‰æ˜¯ç¤¾åŒºæœ€æµè¡Œçš„ã€é€šç”¨çš„ Javascript Lint å·¥å…·ï¼ŒLint ç•Œçš„ Babelã€‚æ”¯æŒå®šåˆ¶æ’ä»¶ã€presetã€‚å¦‚æœä¸æƒ³æŠ˜è…¾å¯ä»¥é€‰æ‹©å®ƒçš„ä¸€äº›é¢„å®šä¹‰é…ç½®
  - [TSLint](https://github.com/palantir/tslint) - Typescript Lint å·¥å…·ï¼Œå·²åºŸå¼ƒ, æ¨èä½¿ç”¨ ESLint
- è§„èŒƒ
  - [JavaScript Standard Style](https://standardjs.com/readme-zhcn.html#why-should-i-use-javascript-standard-style) - ğŸ”¥ é›¶é…ç½®çš„ã€â€˜æ ‡å‡†â€™çš„ Javascript ç¼–ç è§„èŒƒ. åº•å±‚åŸºäº Eslintã€‚
  - [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript) - Airbnb çš„ç¼–ç è§„èŒƒï¼Œä¸šç•Œæ ‡æ†
- ç±»å‹æ£€æŸ¥
  - `Typescript` - ğŸ”¥ Javascript è¯­è¨€çš„è¶…é›†ï¼Œè¿™æ˜¯ä¸€é—¨â€˜æ–°â€™çš„è¯­è¨€ï¼Œè€Œä¸æ˜¯ç®€å•çš„ç±»å‹æ£€æŸ¥å™¨. ä¸è¿‡å®ƒä¹Ÿæ”¯æŒåŸç”Ÿ Javascript çš„ç±»å‹æ£€æŸ¥
  - `Flow` - Facebook å‡ºå“çš„ç±»å‹æ£€æŸ¥å™¨ï¼Œè¯­æ³•å’Œ `Typescript` ç±»ä¼¼. ä¸ªäººæ¨èä½¿ç”¨ `Typescript`

## CSS

- Lint å·¥å…·
  - [stylelint](https://stylelint.docschina.org/) - ğŸ”¥ é€šç”¨çš„ CSS ç¼–ç æ£€æŸ¥å·¥å…·ï¼Œæ”¯æŒæœ€æ–°çš„ CSS è¯­æ³•ã€CSS-in-jsã€ä»¥åŠå…¶ä»–ç±» CSS è¯­æ³•(å¦‚ SCSSã€Less). å®ƒä¹Ÿæœ‰é¢„å®šä¹‰é…ç½®ï¼Œæ¨èä½¿ç”¨
  - è§„èŒƒ
    - [Airbnb CSS / Sass Styleguide](https://github.com/airbnb/css)
    - [Code Guide](https://codeguide.co/)

## ç‰¹å®šæ¡†æ¶é£æ ¼æŒ‡å—

- [vue-style-guide](https://vue.docschina.org/v2/style-guide/)
- [Airbnb React/JSX Style Guide](https://github.com/airbnb/javascript/tree/master/react)

## ä»£ç æ ¼å¼åŒ–

- [Prettier](https://prettier.io/) ğŸ”¥ å…³äºä»£ç æ ¼å¼åŒ–çš„ä¸œè¥¿éƒ½å¯ä»¥äº¤ç»™å®ƒåšï¼Œåœ¨æ­¤åŸºç¡€ä¸Šé…åˆ eslint åšè¯­ä¹‰æ£€æŸ¥

## ä¸šç•Œè§„èŒƒ

- [è…¾è®¯](https://tgideas.qq.com/doc/index.html)
- [å‡¹å‡¸å®éªŒå®¤ä»£ç è§„èŒƒ](https://guide.aotu.io/index.html)
- [ç™¾åº¦ FEX è§„èŒƒ](https://github.com/fex-team/styleguide)
- [ç½‘æ˜“](http://nec.netease.com/standard)

## Code Review

ä¸Šè¿°çš„ Lint å·¥å…·å’Œç±»å‹æ£€æŸ¥å™¨, å¯ä»¥çº¦æŸä»£ç é£æ ¼ã€é¿å…ä½çº§çš„è¯­æ³•é”™è¯¯ã€‚ä½†æ˜¯å³ä½¿é€šè¿‡ä¸Šé¢çš„ Lint å’Œç±»å‹æ£€æŸ¥ï¼Œä»£ç ä¹Ÿå¯èƒ½æœªå¿…æ˜¯â€˜å¥½ä»£ç â€™,å› ä¸ºä»£ç çš„æœ€ä½³å®è·µæ˜¯æ— æ³•é€šè¿‡æ­»çš„è§„åˆ™å»å®ç°çš„ï¼Œè¿™æ—¶å€™`Code Review` çš„ä½œç”¨å°±ä½“ç°å‡ºæ¥äº†ï¼Œåœ¨æ­¤é˜¶æ®µæˆ‘ä»¬å¯ä»¥æ£€æŸ¥ï¼š

- ç¼–ç¨‹åŸåˆ™ã€è®¾è®¡æ€æƒ³
- æ¨¡å—è€¦åˆç¨‹åº¦ã€ä»£ç é‡å¤
- ä»£ç å¥å£®æ€§ã€‚æ˜¯å¦å­˜åœ¨å†…å­˜æ³„éœ²ã€æ˜¯å¦çº¿ç¨‹å®‰å…¨ã€æ˜¯å¦æœ‰æ½œåœ¨æ€§èƒ½é—®é¢˜å’Œå¼‚å¸¸ã€é”™è¯¯æ˜¯å¦è¢«å¤„ç†
- ä»£ç çš„æ€§èƒ½å’Œæ•ˆç‡
- æ˜¯å¦æœ‰æ²¡æœ‰è€ƒè™‘åˆ°çš„åœºæ™¯

`Code Review` çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå¯ä»¥è®©é¡¹ç›®æˆå‘˜ç†Ÿæ‚‰é¡¹ç›®ï¼Œæé«˜ä»£ç è´¨é‡ï¼Œæå‡æˆå‘˜ä»£ç æ°´å¹³ã€‚

## å®è·µ(ä½¿ç”¨ husky+lint-staged+eslint è§„èŒƒå‰ç«¯ä»£ç )

### Prettier

- å®‰è£…ä½¿ç”¨

1.  è¿è¡Œ `npm install -D prettier` å³å¯å®‰è£…åˆ°é¡¹ç›®ä¸­ã€‚
2.  æ·»åŠ  `"lint:prettier": "prettier --write **/*.{html,js,vue}"` å‘½ä»¤ï¼Œè¿è¡Œ `npm run lint:prettier` å³å¯æ‰‹åŠ¨æ ¼å¼åŒ–ä»£ç 

- é…ç½®ä¿®æ”¹
  æ·»åŠ  `prettier.config.js` ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œæ·»åŠ `.prettierignore`è®¾ç½®å¿½ç•¥æ–‡ä»¶

### Eslint

- å®‰è£…ä½¿ç”¨

1.  è¿è¡Œ`npm install -D eslint` å®‰è£…åˆ°é¡¹ç›®
2.  ä½¿ç”¨ `eslint --init` åˆå§‹åŒ–`eslint`é…ç½®
3.  æ·»åŠ  `"lint": "eslint --fix **/*.{js,jsx,vue}"` å‘½ä»¤ï¼Œè¿è¡Œ `npm run lint `å³å¯æ‰‹åŠ¨æ ¼å¼åŒ–ä»£ç 

- é…ç½®ä¿®æ”¹
  æ·»åŠ  `.eslintrc.js` ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œæ·»åŠ `.eslintignore`è®¾ç½®å¿½ç•¥æ–‡ä»¶

- æ•´åˆ Prettier
  Prettier æä¾›äº† `eslint-config-prettier` å’Œ `eslint-plugin-prettier` ä¸¤ä¸ªé’ˆå¯¹ ESLint çš„åŒ…ï¼Œå‰è€…é…ç½® ESLint å…³é—­ä¸ Prettier å†²çªçš„è§„åˆ™ï¼Œåè€…è®© Prettier ä½œä¸ºä¸€ä¸ªæ’ä»¶è¿è¡Œåœ¨ ESLint ä¸­ï¼Œé€šè¿‡ ESLint ç»Ÿä¸€æ£€æŸ¥ä¿®æ”¹ä¸¤éƒ¨åˆ†è§„åˆ™

1. å®‰è£…ä¸¤ä¸ªåŒ… `npm install -D eslint-config-prettier eslint-plugin-prettier`
2. åœ¨ `.eslintrc.js` ä¸­æ·»åŠ é…ç½® `extends: ["plugin:prettier/recommended"]`

### Stylelint

- å®‰è£…ä½¿ç”¨

1.  è¿è¡Œ `npm install -D stylelint stylelint-config-standard` å³å¯å®‰è£…åˆ°é¡¹ç›®ä¸­ã€‚
2.  æ·»åŠ  `"lint:css": "stylelint --fix **/*.{css,html,vue}"` å‘½ä»¤ï¼Œè¿è¡Œ `npm run lint:css` å³å¯æ‰‹åŠ¨æ ¼å¼åŒ–ä»£ç 

- é…ç½®ä¿®æ”¹
  æ·»åŠ  `stylelint.config.js` ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œæ·»åŠ `.stylelintignore`è®¾ç½®å¿½ç•¥æ–‡ä»¶

- æ•´åˆ Prettier
  Prettier æä¾›äº† `stylelint-config-prettier` å’Œ `eslint-prettier` ä¸¤ä¸ªé’ˆå¯¹ Stylelint çš„åŒ…ï¼Œå‰è€…é…ç½® Stylelint å…³é—­ä¸ Prettier å†²çªçš„è§„åˆ™ï¼Œåè€…è®© Prettier ä½œä¸ºä¸€ä¸ªæ’ä»¶è¿è¡Œåœ¨ Stylelint ä¸­ï¼Œé€šè¿‡ Stylelint ç»Ÿä¸€æ£€æŸ¥ä¿®æ”¹ä¸¤éƒ¨åˆ†è§„åˆ™

1. å®‰è£…åŒ… `npm install -D stylelint-config-prettier stylelint-prettier stylelint-config-html postcss postcss-html stylelint-config-rational-order`
2. åœ¨ `.stylelintrc.js `ä¸­æ·»åŠ é…ç½®

```js
module.exports = {
  root: true,
  // customSyntax: 'postcss-less', //å…·ä½“è§£æå“ªç§é¢„å¤„ç†å™¨
  extends: [
    'stylelint-config-standard',
    'stylelint-config-prettier',
    'stylelint-config-recommended',
    'stylelint-config-rational-order', //cssé¡ºåºæ’ä»¶
  ],
  ignoreFiles: ['**/*.js', '**/*.jsx', '**/*.tsx', '**/*.ts'],
  overrides: [
    {
      files: ['*.vue', '**/*.vue'],
      extends: ['stylelint-config-recommended', 'stylelint-config-html'],
      rules: {
        'selector-pseudo-class-no-unknown': [
          true,
          {
            ignorePseudoClasses: ['deep', 'global'],
          },
        ],
        'selector-pseudo-element-no-unknown': [
          true,
          {
            ignorePseudoElements: ['v-deep', 'v-global', 'v-slotted'],
          },
        ],
      },
    },
  ],
};
```

### Git æ•´åˆ

é€šè¿‡`husky`ï¼Œ`link-staged`å’Œ`git hook`æœºåˆ¶ï¼Œå¯ä»¥å®ç°æäº¤æ—¶è¿›è¡Œæ ¼å¼åŒ–æ£€æµ‹å’Œæ ¼å¼æ“ä½œï¼Œä¿è¯ä»£ç æäº¤çš„è´¨é‡ã€‚

> âš ï¸ ç¡®ä¿ node ç‰ˆæœ¬å¤§äº 12.x

1. è¿è¡Œ `npm install -D husky lint-staged` å®‰è£…`husky`ã€`lint-staged`
2. è¿è¡Œ `npx husky install` åˆå§‹åŒ–`husky`é…ç½®ç›®å½• `.husky`
3. è¿è¡Œ `npx husky add .husky/pre-commit "npx lint-staged"` é…ç½®`pre-commit hook`
4. é…ç½® `lint-staged`ï¼Œå¯åœ¨ package.json ä¸­é…ç½®

```json
"lint-staged": {
    "*.{vue,js,ts,md}": "npm run prettier",
    "*.{vue,js,ts}": "npm run lint",
    "*.{css,vue}": [
      "npm run lint:css"
    ]
  },
```
